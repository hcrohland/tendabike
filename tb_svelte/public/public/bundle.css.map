{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../Picker.svelte",
    "../Gear.svelte",
    "../GearCard.svelte",
    "../Modal.svelte",
    "../Part.svelte",
    "../PartHist.svelte",
    "../Spares.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { createEventDispatcher, onMount } from 'svelte';\n  import { get_current_component } from 'svelte/internal'; // eslint-disable-line camelcase\n  import { slide } from 'svelte/transition';\n  import groupedZones from './timezones';\n  import {\n    scrollIntoView,\n    uid,\n    slugify,\n    keyCodes,\n    ungroup,\n    filter,\n    pick\n  } from './utils';\n\n  // ***** Public API *****\n\n  // The timezone value comes from the consumer of the component\n  // If it's not provided, we will set it in onMount to be the user's current timezone\n  export let timezone = null;\n\n  // Should the dropdown be expanded by default?\n  export let expanded = false;\n\n  // We can allow the user to filter the timezones displayed to only a few\n  export let allowedTimezones = null;\n\n  // ***** End Public API *****\n\n  // What is the current zone?\n  // Array ['Abidjan', '+00:00', '+00:00']\n  // The first value is the display name for the zone, the second is the standard offset, the third the daylight saving time offset\n  let currentZone;\n\n  // We keep track of what the user is typing in the search box\n  // String\n  let userSearch;\n\n  // What is the currently selected zone in the dropdown?\n  // String 'Africa/Abidjan'\n  let highlightedZone;\n\n  // DOM nodes refs\n  let toggleButtonRef;\n  let searchInputRef;\n  let clearButtonRef;\n  let listBoxRef;\n  let listBoxOptionRefs;\n\n  // A few IDs that will we use for a11y\n  const labelId = uid();\n  const listBoxId = uid();\n  const searchInputId = uid();\n\n  // We ungroup the zones\n  // e.g. { Africa: {'Africa/Abidjan': ['Abidjan', '+00:00', '+00:00']} }\n  // => {'Africa/Abidjan': ['Abidjan', '+00:00', '+00:00']}\n  const ungroupedZones = ungroup(groupedZones);\n\n  const userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone; // eslint-disable-line new-cap\n\n  // We will only display the timezones the user passed in\n  // and default to all the zones if that's empty or the wrong format\n  let availableZones = ungroupedZones;\n\n  if (allowedTimezones) {\n    if (Array.isArray(allowedTimezones)) {\n      availableZones = pick(ungroupedZones, [\n        ...allowedTimezones,\n        userTimezone\n      ]);\n    } else {\n      console.error(\n        'You need to provide a list of timezones as an Array!',\n        `You provided ${allowedTimezones}.`\n      );\n    }\n  }\n\n  // We also want a list of all the valid zones\n  // e.g. {'Africa/Abidjan': ['Abidjan', '+00:00', '+00:00'], 'Africa/Accra': ['Accra', '+00:00', '+00:00']}\n  // => ['Africa/Abidjan', 'Africa/Accra']\n  const validZones = Object.keys(availableZones);\n\n  // Zones will be filtered as the user types, so we keep track of them internally here\n  let filteredZones = [];\n\n  // We take the ungroupedZones and create a list of just the user-visible labels\n  // and add them to the refs\n  // e.g. {'Africa/Abidjan': ['Abidjan', '+00:00', '+00:00'], 'Africa/Accra': ['Accra', '+00:00', '+00:00']}\n  // => ['Abidjan', 'Accra']\n  listBoxOptionRefs = Object.values(availableZones).map(([zone]) => ({ [zone]: null }));\n\n  // We keep track of the initial state so we can reset to these values when needed\n  const initialState = {\n    expanded,\n    userSearch: null\n  };\n\n  // Reset the dropdown and all internal state to the initial values\n  const reset = () => {\n    expanded = initialState.expanded; // eslint-disable-line prefer-destructuring\n    userSearch = initialState.userSearch; // eslint-disable-line prefer-destructuring\n  };\n\n  // We will use the dispatcher to send the update event\n  const dispatch = createEventDispatcher();\n  // Because CustomEvents don't bubble by default, custom components won't work\n  // We will need to do some tricks for this to work properly\n  // https://github.com/sveltejs/svelte/issues/3119\n  const component = get_current_component();\n\n  const dispatchUpdates = () => {\n    const eventName = 'update';\n    const eventData = { timezone };\n    const customEvent = new CustomEvent(eventName, {\n      detail: eventData,\n      bubbles: true,\n      cancelable: true,\n      composed: true\n    });\n\n    component.dispatchEvent && component.dispatchEvent(customEvent);\n    dispatch(eventName, eventData);\n  };\n\n  // Emit the event back to the consumer\n  const handleTimezoneUpdate = (ev, zoneId) => {\n    currentZone = ungroupedZones[zoneId];\n    timezone = zoneId;\n    dispatchUpdates();\n    reset();\n    toggleButtonRef.focus();\n    ev.preventDefault();\n  };\n\n  // ***** Methods *****\n\n  // Figure out if a grouped zone has any currently visible zones\n  // We use this when the user searches in order to show/hide the group name in the list\n  const groupHasVisibleChildren = (group, zones) =>\n    Object.keys(groupedZones[group]).some((zone) => zones.includes(zone));\n\n  // Scroll the list to a specific element in it if that element is not already visible on screen\n  const scrollList = (zone) => {\n    const zoneElementRef = listBoxOptionRefs[zone];\n    if (listBoxRef && zoneElementRef) {\n      scrollIntoView(zoneElementRef, listBoxRef);\n      zoneElementRef.focus({ preventScroll: true });\n    }\n  };\n\n  // Every time the user uses their keyboard to move up or down in the list,\n  // we need to figure out if their at the end/start of the list and scroll the correct elements\n  // into view\n  const moveSelection = (direction) => {\n    const len = filteredZones.length;\n    const zoneIndex = filteredZones.findIndex(\n      (zone) => zone === highlightedZone\n    );\n\n    let index;\n\n    if (direction === 'up') {\n      index = (zoneIndex - 1 + len) % len;\n    }\n\n    if (direction === 'down') {\n      index = (zoneIndex + 1) % len;\n    }\n\n    // We update the highlightedZone to be the one the user is currently on\n    highlightedZone = filteredZones[index];\n    // We make sure the highlightedZone is visible on screen, scrolling it into view if not\n    scrollList(highlightedZone);\n  };\n\n  // We watch for when the user presses Escape, ArrowDown or ArrowUp and react accordingly\n  const keyDown = (ev) => {\n    // If the clearButton is focused, don't do anything else\n    // We should only continue if the dropdown is expanded\n    if (document.activeElement === clearButtonRef || !expanded) {\n      return;\n    }\n\n    // If the user presses Escape, we dismiss the drodpown\n    if (ev.keyCode === keyCodes.Escape) {\n      reset();\n    }\n\n    // If the user presses the down arrow, start navigating the list\n    if (ev.keyCode === keyCodes.ArrowDown) {\n      ev.preventDefault();\n      moveSelection('down');\n    }\n    // If the user presses the up arrow, start navigating the list\n    if (ev.keyCode === keyCodes.ArrowUp) {\n      ev.preventDefault();\n      moveSelection('up');\n    }\n    // If the user presses Enter and the dropdown is expanded, select the current item\n    if (ev.keyCode === keyCodes.Enter && highlightedZone) {\n      handleTimezoneUpdate(ev, highlightedZone);\n    }\n    // If the user start to type letters or numbers, we focus on the Search field\n    if (\n      keyCodes.Characters.includes(ev.keyCode) ||\n      ev.keyCode === keyCodes.Backspace\n    ) {\n      searchInputRef.focus();\n    }\n  };\n\n  // When the user presses the clear button when searching,\n  // we want to clear the text and refocus on the input\n  const clearSearch = () => {\n    userSearch = initialState.userSearch; // eslint-disable-line prefer-destructuring\n    // Refocus to the search input\n    searchInputRef.focus();\n  };\n\n  const setHighlightedZone = (zone) => {\n    highlightedZone = zone;\n  };\n\n  const toggleExpanded = (ev) => {\n    if (ev.keyCode) {\n      // If it's a keyboard event, we should react only to certain keys\n      // Enter and Space should show it\n      if ([keyCodes.Enter, keyCodes.Space].includes(ev.keyCode)) {\n        expanded = !expanded;\n      }\n      // Escape should just hide the menu\n      if (ev.keyCode === keyCodes.Escape) {\n        expanded = false;\n      }\n      // ArrowDown should show it\n      if (ev.keyCode === keyCodes.ArrowDown) {\n        expanded = true;\n      }\n    } else {\n      // If there is no keyCode, it's not a keyboard event\n      expanded = !expanded;\n    }\n  };\n\n  const scrollToHighlighted = () => {\n    if (expanded && highlightedZone) {\n      scrollList(highlightedZone);\n    }\n  };\n\n  // ***** Reactive *****\n\n  // As the user types, we filter the available zones to show only those that should be visible\n  $: filteredZones =\n      userSearch && userSearch.length > 0\n        ? filter(userSearch, availableZones)\n        : validZones.slice();\n\n  const setTimezone = (tz) => {\n    if (!tz) {\n      timezone = userTimezone;\n    }\n\n    if (tz && !validZones.includes(tz)) {\n      // The timezone must be a valid timezone, so we check it against our list of values in flat\n      console.warn(\n        `The timezone provided is not valid: ${tz}!`,\n        `Valid zones are: ${validZones}`\n      );\n      timezone = userTimezone;\n    }\n\n    currentZone = ungroupedZones[timezone];\n    setHighlightedZone(timezone);\n  };\n\n  // We want to properly handle any potential changes to the current timezone\n  // that might come in from the consumer of the component.\n  // This includes setting the proper timezone and dispatching the updated values\n  // back up to the consumer\n  $: setTimezone(timezone);\n\n  // ***** Lifecycle methods *****\n  onMount(() => {\n    setTimezone(timezone);\n    scrollToHighlighted();\n  });\n</script>\n\n{#if expanded}\n  <div class=\"overlay\" on:click=\"{reset}\"></div>\n{/if}\n\n<button\n  bind:this=\"{toggleButtonRef}\"\n  type=\"button\"\n  aria-label=\"{`${currentZone[0]} is currently selected. Change timezone`}\"\n  aria-haspopup=\"listbox\"\n  data-toggle=\"true\"\n  aria-expanded=\"{expanded}\"\n  on:click=\"{toggleExpanded}\"\n  on:keydown=\"{toggleExpanded}\"\n>\n  <span>{currentZone[0]} <small>GMT {currentZone[1]}</small></span>\n  <svg width=\"10\" height=\"16\" viewBox=\"0 0 16 16\">\n    <polygon x=\"0\" y=\"0\" points=\"8, 8, 16, 16, 0, 16\" transform=\"{expanded ? 'rotate(0)' : 'rotate(180, 8, 8)'} translate(0 -4)\"/>\n  </svg>\n</button>\n{#if expanded}\n  <div\n    class=\"tz-dropdown\"\n    transition:slide\n    on:introend=\"{scrollToHighlighted}\"\n    on:keydown=\"{keyDown}\"\n  >\n    <span class=\"sr-only\" id=\"{labelId}\">\n      Select a timezone from the list. Start typing to filter or use the arrow\n      keys to navigate the list\n    </span>\n    <div class=\"input-group\">\n      <!-- svelte-ignore a11y-autofocus -->\n      <input\n        id=\"{searchInputId}\"\n        bind:this=\"{searchInputRef}\"\n        type=\"search\"\n        aria-autocomplete=\"list\"\n        aria-controls=\"{listBoxId}\"\n        aria-labelledby=\"{labelId}\"\n        autocomplete=\"off\"\n        autocorrect=\"off\"\n        placeholder=\"Search...\"\n        bind:value=\"{userSearch}\"\n        autofocus\n      />\n\n      {#if userSearch && userSearch.length > 0}\n        <button\n          bind:this=\"{clearButtonRef}\"\n          title=\"Clear search text\"\n          on:click=\"{clearSearch}\"\n        >\n          &times;\n        </button>\n      {/if}\n    </div>\n\n    <ul\n      tabindex=\"-1\"\n      class=\"tz-groups\"\n      id=\"{listBoxId}\"\n      role=\"listbox\"\n      bind:this=\"{listBoxRef}\"\n      aria-labelledby=\"{labelId}\"\n      aria-activedescendant=\"{currentZone && `tz-${slugify(currentZone[0])}`}\"\n    >\n      {#each Object.keys(groupedZones) as group}\n        {#if groupHasVisibleChildren(group, filteredZones)}\n          <li role=\"option\" aria-hidden=\"true\">\n            <p>{group}</p>\n          </li>\n          {#each Object.entries(groupedZones[group]) as [zoneLabel, zoneDetails]}\n            {#if filteredZones.includes(zoneLabel)}\n              <li\n                role=\"option\"\n                tabindex=\"0\"\n                id=\"{`tz-${slugify(zoneLabel)}`}\"\n                bind:this=\"{listBoxOptionRefs[zoneLabel]}\"\n                aria-label=\"{`Select ${zoneDetails[0]}`}\"\n                aria-selected=\"{highlightedZone === zoneDetails[0]}\"\n                on:mouseover=\"{() => setHighlightedZone(zoneDetails[0])}\"\n                on:click=\"{(ev) => handleTimezoneUpdate(ev, zoneLabel)}\"\n              >\n                {zoneDetails[0]} <span>GMT {zoneDetails[1]}</span>\n              </li>\n            {/if}\n          {/each}\n        {/if}\n      {/each}\n    </ul>\n  </div>\n{/if}\n\n<style>\n  .overlay {\n    background: transparent;\n    height: 100vh;\n    left: 0;\n    position: fixed;\n    top: 0;\n    width: 100vw;\n    z-index: 0;\n  }\n\n  button {\n    background: transparent;\n    border: 0;\n    cursor: pointer;\n  }\n\n  svg polygon {\n    fill: var(--color-info-900, #076196);\n  }\n\n  button[data-toggle] {\n    align-content: flex-start;\n    align-items: center;\n    display: flex;\n    padding: 0;\n  }\n\n  button[data-toggle] > span {\n    color: var(--color-info-900, #076196);\n    font-weight: 500;\n    margin-right: 0.4em;\n    text-decoration: underline;\n  }\n\n  button[data-toggle] > span small {\n    font-weight: 400;\n    font-size: 0.8em;\n  }\n\n  .tz-dropdown {\n    background-color: var(--color-white, #fff);\n    border: 1px solid var(--color-gray-100, rgba(0, 0, 0, 0.2));\n    box-shadow: 0 1px 6px 0 var(--color-gray-100, rgba(0, 0, 0, 0.2));\n    border-radius: 4px;\n    display: flex;\n    flex-direction: column;\n    min-width: 18em;\n    max-width: 100vw;\n    position: absolute;\n    z-index: 50;\n  }\n\n  .tz-groups {\n    height: 240px;\n    max-height: 40vh;\n    overflow: scroll;\n  }\n\n  ul {\n    margin: 0;\n    list-style: none inside none;\n    padding: 0;\n  }\n\n  ul li {\n    font-size: 0.9rem;\n    display: block;\n    margin: 0;\n    padding: 0;\n  }\n\n  ul li > span {\n    font-size: 0.8em;\n    line-height: 1.4em;\n    text-align: right;\n  }\n\n  ul li p {\n    color: var(--color-gray-900, #292929);\n    font-size: 0.92rem;\n    font-weight: 600;\n    letter-spacing: 0.08em;\n    margin: 0;\n    padding: 0;\n    text-transform: uppercase;\n  }\n\n  ul li {\n    background: transparent;\n    border: 0;\n    color: var(--color-gray-600, #757575);\n    display: flex;\n    justify-content: space-between;\n    padding: 0.8em 1.2em;\n    text-align: left;\n  }\n\n  ul li[aria-selected]:hover,\n  ul li:focus,\n  li[aria-selected='true'] {\n    background: var(--color-info-900, #076196);\n    color: #fff;\n    cursor: pointer;\n  }\n\n  .input-group {\n    display: flex;\n    position: relative;\n  }\n\n  .input-group > button {\n    position: absolute;\n    top: 1.1em;\n    right: 0.8em;\n  }\n\n  input {\n    border: 1px solid var(--color-gray-400, #acacac);\n    border-radius: 4px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);\n    margin: 0.4em;\n    padding: 0.6em 1.6em 0.6em 0.4em;\n    width: calc(100% - 0.8em);\n  }\n\n  .sr-only {\n    border: 0;\n    clip: 'rect(0, 0, 0, 0)';\n    height: 1px;\n    margin: -1px;\n    opacity: 0;\n    overflow: hidden;\n    padding: 0;\n    position: absolute;\n    width: 1px;\n  }\n</style>\n",
    "<script lang=\"ts\">import { Button } from 'sveltestrap';\nimport { filterValues, types, parts, isAttached, attachments, category } from './store';\nimport Subparts from './Subparts.svelte';\nimport Usage from './Usage.svelte';\n;\nexport let params;\nlet hook, gear;\n$: {\n    gear = $parts[params.id];\n    hook = $types[gear.what];\n    category.set(hook);\n}\n$: attachees = filterValues($attachments, (a) => a.gear == gear.id);\n//# sourceMappingURL=Gear.svelte.js.map</script>\n\n<style>\n.scroll-x {\n  width: 100%;\n  overflow-x: scroll;\n}\n</style>\n<div class=\"scroll-x\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">{hook.name}</th>\n        <th scope=\"col\">Brand</th>\n        <th scope=\"col\">Model</th>\n        <th scope=\"col\">Purchase</th>\n        <Usage header/>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>{gear.name}</td>\n        <td>{gear.vendor}</td>\n        <td>{gear.model}</td>\n        <td>{new Date(gear.purchase).toLocaleDateString(navigator.language)}</td>\n        <Usage part={gear} />\n      </tr>\n    </tbody>\n  </table>\n  <Subparts {hook} {attachees} />\n</div>",
    "<script lang=\"ts\">import { slide } from 'svelte/transition';\nimport { category, formatSeconds } from './store';\nexport let part;\nexport let display = false;\nexport let isOpen = false;\nlet showLink = false;\nfunction model(part) {\n    if (part.model == '' && part.vendor == '') {\n        return 'unknown model';\n    }\n    else {\n        return part.vendor + ' ' + part.model;\n    }\n}\n//# sourceMappingURL=GearCard.svelte.js.map</script>\n\n<style>\n  .header:hover {\n    background-color: lightgray;\n  }\n\n  .param {\n      font-weight: bold;\n  }\n</style>\n\n<div class=\"card\">\n  <div class=\"header\">\n    <div class=\"card-header\" on:click={() => (isOpen = !isOpen)} on:mouseenter={()=> showLink = true} on:mouseleave={()=> showLink = false}>\n      <span class=\"h5 mb-0\"> \n        {part.name} \n      </span>\n      {#if showLink && !display}\n        <div class=\"float-right text-reset\">\n\n          <a href={\"/strava/bikes/\" + part.id} alt=\"View on Strava\" target=\"_blank\"><img src=\"strava.png\" alt=\"View on Strava\" title=\"View on Strava\" > </a> \n          <a href=\"#/gear/{part.id}\" class=\"badge badge-secondary\" title={\"View \"+ $category.name.toLowerCase() + \" details\"}>\n            &Longrightarrow;\n          </a>\n        </div>\n      {/if}\n      \n    </div>\n  </div>\n  {#if isOpen || display}\n    <div transition:slide>\n      <div class=\"card-body\">\n        is a <span class=\"param\">{model(part)}</span>\n        purchased <span class=\"param\">{new Date(part.purchase).toLocaleDateString(navigator.language)}</span>\n        <br>which you used <span class=param>{part.count.toLocaleString(navigator.language)}</span> times \n        for <span class=\"param\">{formatSeconds(part.time)}</span> hours.\n        <p> You covered <span class=\"param\">{parseFloat((part.distance / 1000).toFixed(1)).toLocaleString(navigator.language)}</span> km \n        climbing <span class=\"param\">{part.climb.toLocaleString(navigator.language)}</span> and descending <span class=\"param\">{part.descend.toLocaleString(navigator.language)}</span> meters </p>\n        \n      </div>\n    </div>\n\n  {/if}\n</div>\n",
    "<script>\n\timport { createEventDispatcher, onDestroy } from 'svelte';\n\n\tconst dispatch = createEventDispatcher();\n\tconst close = () => dispatch('close');\n\n\tlet svmodal;\n\n\tconst handle_keydown = e => {\n\t\tif (e.key === 'Escape') {\n\t\t\tclose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.key === 'Tab') {\n\t\t\t// trap focus\n\t\t\tconst nodes = svmodal.querySelectorAll('*');\n\t\t\tconst tabbable = Array.from(nodes).filter(n => n.tabIndex >= 0);\n\n\t\t\tlet index = tabbable.indexOf(document.activeElement);\n\t\t\tif (index === -1 && e.shiftKey) index = 0;\n\n\t\t\tindex += tabbable.length + (e.shiftKey ? -1 : 1);\n\t\t\tindex %= tabbable.length;\n\n\t\t\ttabbable[index].focus();\n\t\t\te.preventDefault();\n\t\t}\n\t};\n\n\tconst previously_focused = typeof document !== 'undefined' && document.activeElement;\n\n\tif (previously_focused) {\n\t\tonDestroy(() => {\n\t\t\tpreviously_focused.focus();\n\t\t});\n\t}\n</script>\n\n<svelte:window on:keydown={handle_keydown}/>\n\n<div class=\"svmodal-background\" on:click={close}></div>\n\n<div class=\"svmodal\" role=\"dialog\" aria-modal=\"true\" bind:this={svmodal}>\n\t<slot name=\"header\"></slot>\n  <span type=\"button\" class=\"border-0 float-right\" on:click={close}>&times;</span>\n\n\t<hr>\n\t<slot></slot>\n\t<hr>\n  <span>\n    <slot name=\"footer\"></slot>\n  </span>\n\t<!-- svelte-ignore a11y-autofocus -->\n</div>\n\n<style>\n\t.svmodal-background {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: rgba(0,0,0,0.3);\n\t}\n\n\t.svmodal {\n\t\tposition: fixed;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\t\twidth: calc(100vw - 4em);\n\t\tmax-width: 40em;\n\t\tmax-height: calc(100vh - 4em);\n\t\toverflow: auto;\n\t\ttransform: translate(-50%,-50%);\n\t\tpadding: 1em;\n\t\tborder-radius: 0.2em;\n\t\tbackground: white;\n\t}\n</style>\n",
    "<script lang=\"ts\">import { filterValues, types, parts, attachments, category, by } from './store';\nimport PartHist from './PartHist.svelte';\nimport GearCard from './GearCard.svelte';\n;\nexport let params;\nlet part;\n$: {\n    part = $parts[params.id];\n    category.set($types[$types[part.what].main]);\n}\n$: atts = filterValues($attachments, (a) => a.part_id == part.id).sort(by(\"attached\"));\n//# sourceMappingURL=Part.svelte.js.map</script>\n\n<style>\n.scroll-x {\n  width: 100%;\n  overflow-x: scroll;\n}\n</style>\n\n<div class=\"scroll-x\">\n  <GearCard {part} display/>\n  <PartHist id={part.id} />\n</div>",
    "<script lang=\"ts\">import { filterValues, parts, attachments, by } from './store';\n;\nimport Usage from './Usage.svelte';\nexport let id;\n$: atts = filterValues($attachments, (a) => a.part_id == id).sort(by(\"attached\"));\n//# sourceMappingURL=PartHist.svelte.js.map</script>\n\n<style>\n.scroll-x {\n  width: 100%;\n  overflow-x: scroll;\n}\n</style>\n\n<div class=\"scroll-x\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">attached to</th>\n        <th scope=\"col\">from </th>\n        <th scope=\"col\">until</th>\n        <Usage header/>\n      </tr>\n    </thead>\n    <tbody>\n      {#each atts as att (att.attached)}\n        <tr>\n          <td>\n          {#if $parts[att.gear]}\n            <a href=\"#/gear/{att.gear}\" class=\"text-reset\">\n            {$parts[att.gear].name}\n            </a>\n          {:else}\n            N/A\n          {/if}\n          <td>{new Date(att.attached).toLocaleDateString(navigator.language)}</td>\n          <td>\n            {#if att.detached}\n              {new Date(att.detached).toLocaleDateString(navigator.language)}\n            {/if}\n          </td>\n          <Usage part={att} />\n        </tr>\n      {/each}\n    </tbody>\n  </table>\n</div>",
    "<script lang=\"ts\">import { filterValues, by, types, parts, state, attachments, isAttached, category } from './store';\nimport { Button } from 'sveltestrap';\nimport Usage from './Usage.svelte';\nimport Attach from './Attach.svelte';\nimport NewPart from './NewPart.svelte';\n;\nexport let params;\nexport let date = new Date;\n// Cannot use category directly since it \n// is unset during destroy and the router gets confused\nlet cat = $types[params.category];\ncategory.set(cat);\nlet spareTypes = filterValues($types, (t) => t.main == cat.id && t.id != cat.id);\nfunction attachedTo(atts, partId, time) {\n    let att = filterValues(atts, (x) => x.part_id === partId && isAttached(x, time)).pop();\n    if (att == undefined)\n        return;\n    return $parts[att.gear].name;\n}\nfunction subparts(type, parts) {\n    return filterValues(parts, (p) => p.what == type.id)\n        .sort(by(\"last_used\"));\n}\nlet attach;\nlet newpart;\n//# sourceMappingURL=Spares.svelte.js.map</script>\n\n<style>\n .border-2 {\n   border-width: 4px;\n }\n</style>\n\n<Attach bind:popup={attach} />\n<NewPart bind:popup={newpart}/>\n\n<table class=\"table table-hover\">\n  <thead>\n    <tr>\n      <th scope=\"col\">Part</th>\n      <th scope=\"col\">Name</th>\n      <Usage header/>\n      {#if $state.show_all_spares}\n        <th>\n          Attached to\n        </th>\n      {/if}\n      <td>\n        <span class=\"badge float-right\">\n          show attached <input type=\"checkbox\" name=\"Show all\" id=\"\" bind:checked={$state.show_all_spares}>  \n        </span>\n      </td>\n    </tr>\n  </thead>\n  <tbody>\n  {#each spareTypes as type (type.id)}\n    <tr>\n      <th colspan=80 scope=\"col\" class=\"border-2 text-nowrap\"> {type.name}s \n          <Button class=\"badge badge-secondary float-right\" on:click={() => newpart(type)}> New {type.name}</Button>\n    </tr>\n      {#each subparts(type, $parts).filter((p) => $state.show_all_spares || !attachedTo($attachments, p.id, date))\n        as part (part.id)}\n      <tr>\n        <td class=\"border-0\"></td>\n        <td title={part.vendor + ' ' + part.model + ' ' + new Date(part.purchase).toLocaleDateString(navigator.language)}>\n          <a href=\"#/part/{part.id}\" class=\"text-reset\">\n            {part.name}\n          </a>\n        </td>\n        <Usage {part} />\n        {#if $state.show_all_spares}\n          <td>\n            {attachedTo($attachments, part.id, date) || '-'}\n          </td>\n        {/if}\n        <td> \n          <span type=\"button\" class=\"badge badge-secondary float-right\" on:click={() => attach(part)}>\n            {attachedTo($attachments, part.id, date)?\"move\":\"attach\"}\n          </span>\n        </td>\n      </tr>\n    {/each}\n  {/each}\n  </tbody>\n</table>"
  ],
  "names": [],
  "mappings": "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"
}